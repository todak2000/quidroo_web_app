{% extends "investor/baseAdmin.html" %}

{% load static %}
{% load humanize %}
{% block body%}
<section class="dashboard-main"> 
    <!-- top-bar -->
    <nav class="main-top">
        <img src= "{% static 'img/logo-mobile.svg' %}" alt="logo" class="img-fluid mobile">
        <!-- <img src= "{% static 'img/bell.svg' %}" alt="bell" class="mobile"> -->
        <a href="{% url 'logout' %}"><img src= "{% static 'img/drop-signout.svg' %}" alt="upload" class="mobile mt-2"></a>
        <div class="avatar-div disappear"> 
            <img src= "{% static 'img/bell.svg' %}" alt="bell" class="img-xs">
            <div class="avatar-div2 " id="drop-down">
                <img src= "{% static 'img/avatar.png' %}" alt="avatar" class="img-sm" style="border-radius: 50%;">
                <img src= "{% static 'img/down.svg' %}" alt="avatar" class="ml-2 img-xs">
            </div>
        </div>
    </nav>
    <ul style="display: none;" id="drop-list">
        <li><a href="{% url 'profile' %}"><img src= "{% static 'img/drop-profile.svg' %}" alt="upload" class="mr-3"> View Profile</a></li>
        <li><a href="{% url 'logout' %}"><img src= "{% static 'img/drop-signout.svg' %}" alt="upload" class="mr-3">Sign out</a></li>
    </ul>
    <!-- top-bar ends -->
    <!-- main section -->
    <div class="main-section">
        <div class="main-title disappear">
            <h4>Admin Sellers' List (
              {% if sellersCount %}
              {{sellersCount}}
              {% else %}
              {% endif %}
              )</h4>
            <button class="btn btn-withdraw" id="check_bids"> Check Bids</button>
            <!-- <a href="{% url 'close_bids' %}" target="_blank" style="color:#5151E0;">Close Bids</a> -->
        </div>
        <div class="main-admin-dashboard">
            
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical" >
                <a class="nav-link active" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="true">Unverified Sellers <span>{{unapprovedSellersCount}}</span></a>
                <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false">Verified Sellers <span>{{approvedSellersCount}}</span></a>
                <!-- <a class="nav-link" id="matured" data-toggle="pill" href="#t-matured" role="tab" >Awaiting Maturity</a>
                <a class="nav-link" id="v-pills-settings-tab2" data-toggle="pill" href="#v-pills-settings2" role="tab" aria-controls="v-pills-settings2" aria-selected="false">Completed</a> -->
            </div>
            <div class="tab-content" id="v-pills-tabContent" style="width:80%;" >
                <!-- Unverified Sellers' tab -->
                <div class="tab-pane fade show active" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab" >
                    <table class="table" id="normal-table">
                        {% if unapprovedSellers %}
                        
                        <thead>
                          <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Business Type</th>
                            <th scope="col">Email</th>
                            <th scope="col">Phone</th>
                            <th scope="col">Credit Score</th>
                            <th scope="col">Joined</th>
                            <th scope="col"></th>
                          </tr>
                        </thead>
                        <!-- <tbody id="ajax_div"></tbody> -->
                        
                        <tbody id="invoice-table3">
                          {% for i in unapprovedSellers %}
                          <tr>
                            <td> 
                              {{i.company_name}}
                            </td>
                            <td>{{i.business_type}}</td>
                            <td> {{i.email}}</td>
                            <td> {{i.phone}}</td>
                            <td> 
                              {% if credit_score >= "9" %}
                              {% elif i.credit_score <= "8.99" and i.credit_score >= "8"%}
                              <span class="badge badge-orange">2</span>
                              {% elif i.credit_score <= "7.99" and i.credit_score >= "7"%}
                              <span class="badge badge-yellow">3</span>
                              {% elif i.credit_score <= "6.99" and i.credit_score >= "6"%}
                              <span class="badge badge-light">4</span>
                              {% elif i.credit_score <= "5.99" and i.credit_score >= "5"%}
                              <span class="badge badge-green">5</span>
                              {% else %}
                              <span class="badge badge-red">1</span>
                              {% endif %}
                            </td>
                            <td>Joined {{i.created_at|timesince}} ago</td>
                            <td>
                              <form action="{% url 'verify_seller' %}" method="post"> {% csrf_token %}<input name="seller_id" id="seller_id" value="{{i.user_id}}" hidden/><button type="submit" class="btn btn-withdraw" style="background-color: #3EAF6E;" name="">Verify</button></form>
                            </td>
                          </tr>
                          {% endfor %} 
                        </tbody>
                        
                        {% else %}      
                        <div class="no-invoice" style="height:auto;">
                            <img src= "{% static 'img/no-invoice.svg' %}" alt="upload" class="mb-3"/>
                            <p>You have no unverified sellers !</p>
                        </div>
                        {% endif %}
                      </table>
                </div>
                <!-- Verified Sellers' tab -->
                <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab" >
                    <table class="table" id="normal-table">
                        {% if approvedSellers %}
                        
                        <thead>
                            <tr>
                              <th scope="col">Name</th>
                              <th scope="col">Business Type</th>
                              <th scope="col">Email</th>
                              <th scope="col">Phone</th>
                              <th scope="col">Credit Score</th>
                              <th scope="col">Joined</th>
                              <th scope="col"></th>
                          </tr>
                        </thead>
                        <!-- <tbody id="ajax_div"></tbody> -->
                        
                        <tbody id="invoice-table3">
                          {% for i in approvedSellers %}
                          <tr>
                            <td> 
                              {{i.company_name}}
                            </td>
                            <td>{{i.business_type}}</td>
                            <td> {{i.email}}</td>
                            <td> {{i.phone}}</td>
                            <td> 
                              {% if i.credit_score >= "9" %}
                              <span class="badge badge-red">1</span>
                              {% elif i.credit_score <= "8.99" and i.credit_score >= "8"%}
                              <span class="badge badge-orange">2</span>
                              {% elif i.credit_score <= "7.99" and i.credit_score >= "7"%}
                              <span class="badge badge-yellow">3</span>
                              {% elif i.credit_score <= "6.99" and i.credit_score >= "6"%}
                              <span class="badge badge-light">4</span>
                              {% elif i.credit_score <= "5.99" and i.credit_score >= "5"%}
                              <span class="badge badge-green">5</span>
                              {% else %}
                              <span class="badge badge-red">1</span>
                              {% endif %}
                            </td>
                            <td>Joined {{i.created_at|timesince}} ago</td>
                            <td>
                              <form action="{% url 'unverify_seller' %}" method="post"> {% csrf_token %}<input name="seller_id2" id="seller_id2" value="{{i.user_id}}" hidden/><button type="submit" class="btn btn-withdraw" style="background-color: #BF3030 ;" name="">Unverify</button></form>
                            </td>
                          </tr>
                          {% endfor %} 
                        </tbody>
                        
                        {% else %}      
                        <div class="no-invoice" style="height:auto;">
                            <img src= "{% static 'img/no-invoice.svg' %}" alt="upload" class="mb-3"/>
                            <p>You have no verified sellers yet!</p>
                        </div>
                        {% endif %}
                        </table>

                </div>
              </div>
                
            </div>
            
        </div>
    </div>
    <!-- main-section ends -->
</section>
{% endblock %}

